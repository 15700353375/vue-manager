webpackJsonp([2],{471:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(495);a.n(s);for(var o in s)["default","default"].indexOf(o)<0&&function(t){a.d(e,t,function(){return s[t]})}(o);var l=a(485),n=a.n(l),i=a(503),r=a(1),c=a.i(r.a)(n.a,i.a,i.b,!1,null,null,null);e.default=c.exports},474:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="https://szy.kiloxy.com";s="https://szy.kiloxy.com";e.baseUrl=s,e.urls={BASE_URL:s,in_theaters:"movie/in_theaters",LOGIN:"user-api/mlogin",GETBUSINESSDATEINFO:s+"/wechatMini/getBusinessDateInfo",GETBUSINESSBASEINFO:s+"/wechatMini/getBusinessBaseInfo",GETBILLINFOWITHOUTFREE:s+"/wechatMini/getBillInfoWithoutFree",GETBILLINFOWITHFREE:s+"/wechatMini/getBillInfoWithFree",GETRECHARGESUMINFO:s+"/wechatMini/getRechargeSumInfo",GETCASHFLOWSUMINFO:s+"/wechatMini/getCashFlowSumInfo",GETROOMSTATUSINFO:s+"/wechatMini/getRoomStatusInfo",GETROOMINFO:s+"/wechatMini/getRoomInfo",GETTECHNICIANQUEUE:s+"/wechatMini/getTechnicianQueue"}},475:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(11),o=function(t){return t&&t.__esModule?t:{default:t}}(s);e.default={clone:function(t){return JSON.parse((0,o.default)(t))},formatTime:function(t,e){var a=e||"YYYY-MM-DD HH:mm:ss";return Moment(1e3*t).format(a)},formatMoney:function(t){return Number(t).toFixed(2)},formatNumber:function(t){if(0==t||t)return parseFloat(Number(t).toFixed(2))},formatPercent:function(t){return t?parseFloat((100*Number(t)).toFixed(2)):0},getWxInfo:function(){var t={holderId:"1",wxRoleType:"1",storeName:"千思三只眼",holderType:"1",holdGroup:"1",address:"成都市武侯区复城国际T4#1603",fphone:"0825-12345678",dzVipCardSupportFlag:0,sessionId:"73ae0d59b3614b59a4746b361b6dfef5"},e={nickName:"午後’品茶",gender:2,language:"zh_CN",city:"Florida",province:"Sichuan",country:"China",avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/nGTVF9QVb73vkuLaiak0ib4ZdIqqfcOlb26tgwKcOAQhkiaKj5kBNGhmZR522I4BYP9iaH5RJod9GPBcrul8eAHnlg/132"};t=(0,o.default)(t),e=(0,o.default)(e),console.log(t,e),t&&e&&(localStorage.setItem("currentInfo",t),localStorage.setItem("userInfo",e))}}},485:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(475),o=function(t){return t&&t.__esModule?t:{default:t}}(s),l=a(474);e.default={props:["currentData"],data:function(){return{comUtil:o.default,selectArray:[{value:0,label:"全部"},{value:1,label:"浴足房间"},{value:2,label:"棋牌房间"}],selectArray2:[{value:0,label:"全部"},{value:1,label:"停用"},{value:2,label:"空闲中"},{value:5,label:"使用中"},{value:8,label:"已买单未离开"},{value:9,label:"需要打扫"},{value:10,label:"已预约"},{value:11,label:"房间暂停"}],select1:{value:0,label:"全部"},select2:{value:0,label:"全部"},listData:[],isShowPop:!1,operObj:{roomName:"",roomStatus:null},menus:{getRoom:"开房"},menus2:{planTechnician:"安排技师",menu2:"商品点单",menu3:"显示详情",menu4:"备注",menu5:"结账"}}},computed:{},watch:{select1:function(t,e){this.changeSelect()},select2:function(t,e){this.changeSelect()},currentData:function(t,e){1==t&&(this.selectRefresh(),this.getRoomList())}},created:function(){var t=localStorage.getItem("currentInfo");this.currentInfo=JSON.parse(t),this.getRoomList()},mounted:function(){},methods:{selectRefresh:function(){this.select1={value:0,label:"全部"},this.select2={value:0,label:"全部"}},changeSelect:function(){if(this.allData&&this.allData.length){var t=this.select1.value,e=this.select2.value;this.listData=t&&!e?_.filter(this.allData,{roomType:this.select1.value.toString()}):t&&e?_.filter(this.allData,{roomType:this.select1.value.toString(),roomStatus:this.select2.value.toString()}):!t&&e?_.filter(this.allData,{roomStatus:this.select2.value.toString()}):o.default.clone(this.allData)}},getRoomList:function(){var t=this,e={holderId:this.currentInfo.holderId,holderType:this.currentInfo.holderType,holderGroup:this.currentInfo.holdGroup};this.$ajaxPost(l.urls.GETROOMINFO,e).then(function(e){e&&(t.allData=t.dealData(e.data),t.listData=o.default.clone(t.allData)),t.selectRefresh()})},dealData:function(t){var e=this;if(t&&t.length)return t.forEach(function(t,a){t.restDay=e.transformTime(t.restMinute)}),t},transformTime:function(t){return t>1440?Math.floor(t/1440):null},dealClass:function(t,e){return!(3!=t&&5!=t&&11!=t&&12!=t||!e.roomOrder||!e.roomOrder.billBatch)},getRoomBodyBackground:function(t){return"10"==t?"#cbffc8":"2"==t||"9"==t?"#BEDCF7":"#fff"},statusColor:function(t,e){return 1==t||2==t?1==e?"color-error":"color-success":3==t?"color-success":"color-warning"},formatDate:function(t){return t?o.default.formatTime(new Date(t.replace(/-/g,"/"))/1e3,"YY/MM/DD HH:mm"):""},operItem:function(t){console.log(t),this.operObj=t,this.isShowPop=!0},showModal:function(t){this.$router.push({name:t,query:{id:this.operObj.roomId}})},closePop:function(){this.isShowPop=!1}},components:{}}},495:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(475),o=function(t){return t&&t.__esModule?t:{default:t}}(s),l=a(474);e.default={props:["currentData"],data:function(){return{comUtil:o.default,selectArray:[{value:0,label:"全部"},{value:1,label:"浴足房间"},{value:2,label:"棋牌房间"}],selectArray2:[{value:0,label:"全部"},{value:1,label:"停用"},{value:2,label:"空闲中"},{value:5,label:"使用中"},{value:8,label:"已买单未离开"},{value:9,label:"需要打扫"},{value:10,label:"已预约"},{value:11,label:"房间暂停"}],select1:{value:0,label:"全部"},select2:{value:0,label:"全部"},listData:[],isShowPop:!1,operObj:{roomName:"",roomStatus:null},menus:{getRoom:"开房"},menus2:{planTechnician:"安排技师",menu2:"商品点单",menu3:"显示详情",menu4:"备注",menu5:"结账"}}},computed:{},watch:{select1:function(t,e){this.changeSelect()},select2:function(t,e){this.changeSelect()},currentData:function(t,e){1==t&&(this.selectRefresh(),this.getRoomList())}},created:function(){var t=localStorage.getItem("currentInfo");this.currentInfo=JSON.parse(t),this.getRoomList()},mounted:function(){},methods:{selectRefresh:function(){this.select1={value:0,label:"全部"},this.select2={value:0,label:"全部"}},changeSelect:function(){if(this.allData&&this.allData.length){var t=this.select1.value,e=this.select2.value;this.listData=t&&!e?_.filter(this.allData,{roomType:this.select1.value.toString()}):t&&e?_.filter(this.allData,{roomType:this.select1.value.toString(),roomStatus:this.select2.value.toString()}):!t&&e?_.filter(this.allData,{roomStatus:this.select2.value.toString()}):o.default.clone(this.allData)}},getRoomList:function(){var t=this,e={holderId:this.currentInfo.holderId,holderType:this.currentInfo.holderType,holderGroup:this.currentInfo.holdGroup};this.$ajaxPost(l.urls.GETROOMINFO,e).then(function(e){e&&(t.allData=t.dealData(e.data),t.listData=o.default.clone(t.allData)),t.selectRefresh()})},dealData:function(t){var e=this;if(t&&t.length)return t.forEach(function(t,a){t.restDay=e.transformTime(t.restMinute)}),t},transformTime:function(t){return t>1440?Math.floor(t/1440):null},dealClass:function(t,e){return!(3!=t&&5!=t&&11!=t&&12!=t||!e.roomOrder||!e.roomOrder.billBatch)},getRoomBodyBackground:function(t){return"10"==t?"#cbffc8":"2"==t||"9"==t?"#BEDCF7":"#fff"},statusColor:function(t,e){return 1==t||2==t?1==e?"color-error":"color-success":3==t?"color-success":"color-warning"},formatDate:function(t){return t?o.default.formatTime(new Date(t.replace(/-/g,"/"))/1e3,"YY/MM/DD HH:mm"):""},operItem:function(t){console.log(t),this.operObj=t,this.isShowPop=!0},showModal:function(t){this.$router.push({name:t,query:{id:this.operObj.roomId}})},closePop:function(){this.isShowPop=!1}},components:{}}},503:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return o});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"room-container"},[a("div",{staticClass:"clearfix select-main"},[a("div",{staticClass:"custom_input"},[a("v-select",{attrs:{options:t.selectArray},model:{value:t.select1,callback:function(e){t.select1=e},expression:"select1"}}),t._v(" "),a("v-select",{attrs:{options:t.selectArray2},model:{value:t.select2,callback:function(e){t.select2=e},expression:"select2"}})],1)]),t._v(" "),a("div",{staticClass:"room-container_main"},[t.listData&&t.listData.length?a("div",{staticClass:"clearfix list-main"},t._l(t.listData,function(e,s){return a("div",{key:s,staticClass:"list-item",on:{click:function(a){t.operItem(e)}}},[t.dealClass(e.roomStatus,e)?a("div",{staticClass:"list-item-top",class:t.dealClass(e.roomStatus,e)?"active"+e.roomOrder.billBatch%10:""},[t._v("\r\n          "+t._s(e.roomOrder.billBatch||"")+" "+t._s(e.roomName)+"\r\n          "),t._v(" "),e.roomOrder?a("span",{staticClass:"item-top-right"},[t._v("￥"+t._s(e.roomOrder.totalGoodsAmount||0)+t._s(2==e.roomType?"+":""))]):t._e()]):a("div",{staticClass:"list-item-top"},[t._v("\r\n          "+t._s(e.roomName)+"\r\n        ")]),t._v(" "),5==e.roomStatus||11==e.roomStatus?a("div",{staticClass:"list-item-content clearfix",style:{"background-color":t.getRoomBodyBackground(e.roomStatus)}},[a("div",{staticClass:"content-first"},[t._v("使用中")]),t._v(" "),t._l(e.cashierShowTechnicianInfoList,function(e,s){return a("div",{key:s,staticClass:"content-second ",class:t.statusColor(e.status,e.isTimeout)},[[a("div",{staticClass:"second-left"},[3!=e.sex?a("span",{staticClass:"fa",class:1==e.sex?"fa-female":"fa-male"}):a("span",{staticClass:"fa"}),t._v("\r\n                "+t._s(e.number)+"\r\n              ")]),t._v(" "),a("div",{staticClass:"second-center"},[t._v(t._s(e.statusName))]),t._v(" "),a("div",{staticClass:"second-right"},[t._v(t._s(e.timing))])]],2)}),t._v(" "),5==e.roomStatus||11==e.roomStatus?a("div",{staticClass:"content-bottom"},[e.remark?a("span",[t._v("备注:"+t._s(e.remark))]):t._e()]):t._e(),t._v(" "),e.restMinute&&11!=e.roomStatus?a("div",{staticClass:"mask"},[a("div",{staticClass:"mask-opacity"}),t._v(" "),e.restDay?a("span",{staticClass:"mask-text mask-text-text"},[t._v(t._s(e.restDay)),a("span",{staticClass:"unit"},[t._v("天")])]):a("span",{staticClass:"mask-text mask-text-text"},[t._v(t._s(e.restMinute)),a("span",{staticClass:"unit"},[t._v("分钟")])])]):t._e(),t._v(" "),"11"==e.roomStatus?a("div",{staticClass:"mask"},[a("div",{staticClass:"mask-opacity"}),t._v(" "),t._m(0,!0)]):t._e()],2):10==e.roomStatus?a("div",{staticClass:"list-item-content clearfix",style:{"background-color":t.getRoomBodyBackground(e.roomStatus)}},[a("div",{staticClass:"content-first"},[t._v("已预约")]),t._v(" "),e.roomAppointment?a("ul",{staticClass:"content-appointment"},[a("li",{staticClass:"appointmentName"},[t._v(t._s(e.roomAppointment.customerName))]),t._v(" "),a("li",{staticClass:"appointmentTel"},[t._v(t._s(e.roomAppointment.customerPhone))]),t._v(" "),a("li",{staticClass:"appointmentNumber"},[t._v(t._s(e.roomAppointment.customerNumber?e.roomAppointment.customerNumber+"位":""))]),t._v(" "),a("li",{staticClass:"appointmentTime",domProps:{innerHTML:t._s(t.formatDate(e.roomAppointment.appointmentDate))}})]):t._e()]):a("div",{staticClass:"list-item-content clearfix",class:{available:"2"==e.roomStatus||"9"==e.roomStatus},style:{"background-color":t.getRoomBodyBackground(e.roomStatus)}},[a("div",{staticClass:"kong-content clearfix"},[a("div",{staticClass:"icon-box"},[a("img",{attrs:{src:"2"==e.roomStatus||"9"==e.roomStatus?"agentStatic/img/icon-free-available.png":"agentStatic/img/icon-free.png",alt:""}})]),t._v(" "),2==e.roomStatus?a("div",{staticClass:"kong-text"},[t._v("\r\n              空闲中("+t._s(e.seatNum)+"座)\r\n            ")]):t._e(),t._v(" "),8==e.roomStatus?a("div",{staticClass:"kong-text"},[t._v("\r\n              客人未离开("+t._s(e.seatNum)+"座)\r\n              "),e.remark?a("div",{staticClass:"remark text-ellipsis2"},[t._v("\r\n                备注:"+t._s(e.remark)+"\r\n              ")]):t._e()]):t._e(),t._v(" "),9==e.roomStatus?a("div",{staticClass:"kong-text"},[t._v("\r\n              需要打扫("+t._s(e.seatNum)+"座)\r\n              "),e.remark?a("div",{staticClass:"remark text-ellipsis2"},[t._v("\r\n                备注："+t._s(e.remark)+"\r\n              ")]):t._e()]):t._e(),t._v(" "),1==e.roomStatus?a("div",{staticClass:"kong-text"},[t._v("\r\n              房间停用\r\n            ")]):t._e()]),t._v(" "),"11"==e.roomStatus?a("div",{staticClass:"mask"},[a("div",{staticClass:"mask-opacity"}),t._v(" "),t._m(1,!0)]):t._e()])])})):a("div",{staticClass:"clearfix list-main"},[a("img",{staticClass:"noDate_img",attrs:{src:"agentStatic/img/wushuju.png",alt:""}})])]),t._v(" "),a("actionsheet",{attrs:{menus:2==t.operObj.roomStatus?t.menus:t.menus2,"close-on-clicking-mask":!0},on:{"on-click-mask":t.closePop,"on-click-menu":t.showModal},model:{value:t.isShowPop,callback:function(e){t.isShowPop=e},expression:"isShowPop"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.operObj.roomName||"")+"房间操作列表")])])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mask-text"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:"agentStatic/img/pauseBtn.png",alt:""}})]),t._v(" "),a("div",{staticClass:"texts"},[t._v("暂停使用")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mask-text"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:"agentStatic/img/pauseBtn.png",alt:""}})]),t._v(" "),a("div",{staticClass:"texts"},[t._v("暂停使用")])])}]}});